<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPX Route Generator - Advanced Running Route Creator</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÉ</text></svg>">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1><i class="fas fa-route"></i> GPX Route Generator</h1>
            <p class="subtitle">Advanced Running Route Creator with Smart Snapping</p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Quick Actions -->
            <div class="sidebar-section">
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="button-group">
                    <button id="clearRoute" class="btn btn-secondary">
                        <i class="fas fa-trash"></i> Clear Route
                    </button>
                    <button id="undoLast" class="btn btn-secondary">
                        <i class="fas fa-undo"></i> Undo Last
                    </button>
                    <button id="fitToRoute" class="btn btn-secondary">
                        <i class="fas fa-expand"></i> Fit to Route
                    </button>
                </div>
            </div>

            <!-- Route Templates -->
            <div class="sidebar-section">
                <h3><i class="fas fa-map-marked-alt"></i> Route Templates</h3>
                <div class="template-selector">
                    <select id="templateSelect" class="form-select">
                        <option value="">Choose a template...</option>
                        <option value="golden-gate-park">Golden Gate Park Loop</option>
                        <option value="embarcadero">Embarcadero Waterfront</option>
                        <option value="twin-peaks">Twin Peaks Challenge</option>
                    </select>
                    <button id="applyTemplate" class="btn btn-primary">
                        <i class="fas fa-play"></i> Apply
                    </button>
                </div>
            </div>

            <!-- Loop Configuration -->
            <div class="sidebar-section">
                <h3><i class="fas fa-redo"></i> Loop Settings</h3>
                <div class="form-group">
                    <label for="loopType">Loop Type:</label>
                    <select id="loopType" class="form-select">
                        <option value="out-and-back">‚ÜîÔ∏è Out and Back</option>
                        <option value="circular">üîÑ Circular Loop</option>
                        <option value="figure-8">‚àû Figure 8</option>
                        <option value="multiple-waypoints">üìç Multiple Waypoints</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="numLoops">Number of Loops:</label>
                    <input type="number" id="numLoops" class="form-input" value="1" min="1" max="10">
                </div>
                <div class="form-group">
                    <label for="gapDistance">Gap Distance (m):</label>
                    <input type="number" id="gapDistance" class="form-input" value="50" min="0" max="500">
                </div>
                <button id="createLoop" class="btn btn-success">
                    <i class="fas fa-magic"></i> Create Loop
                </button>
            </div>

            <!-- Snapping Options -->
            <div class="sidebar-section">
                <h3><i class="fas fa-magnet"></i> Snapping Options</h3>
                <div class="form-group">
                    <label for="snapMode">Snap Mode:</label>
                    <select id="snapMode" class="form-select">
                        <option value="walking">üö∂ Walking</option>
                        <option value="cycling">üö¥ Cycling</option>
                        <option value="driving">üöó Driving</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoSnap" checked>
                        <span class="checkmark"></span>
                        Auto-snap to roads
                    </label>
                </div>
                <button id="snapRoute" class="btn btn-info">
                    <i class="fas fa-magnet"></i> Snap Route
                </button>
            </div>

            <!-- Route Statistics -->
            <div class="sidebar-section">
                <h3><i class="fas fa-chart-line"></i> Route Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Distance:</span>
                        <span id="distance" class="stat-value">0.0 km</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Duration:</span>
                        <span id="duration" class="stat-value">0:00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Elevation:</span>
                        <span id="elevation" class="stat-value">0 m</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Pace:</span>
                        <span id="pace" class="stat-value">--</span>
                    </div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="sidebar-section">
                <h3><i class="fas fa-download"></i> Export</h3>
                <div class="button-group">
                    <button id="exportGPX" class="btn btn-primary">
                        <i class="fas fa-file-code"></i> Export GPX
                    </button>
                    <button id="exportKML" class="btn btn-warning">
                        <i class="fas fa-file-code"></i> Export KML
                    </button>
                    <button id="exportJSON" class="btn btn-info">
                        <i class="fas fa-file-code"></i> Export JSON
                    </button>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <main class="map-container">
            <div id="map"></div>
            
            <!-- Map Controls Overlay -->
            <div class="map-controls">
                <div class="control-group">
                    <button id="drawMode" class="control-btn active" title="Draw Mode">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                    <button id="panMode" class="control-btn" title="Pan Mode">
                        <i class="fas fa-hand-paper"></i>
                    </button>
                    <button id="measureMode" class="control-btn" title="Measure Distance">
                        <i class="fas fa-ruler"></i>
                    </button>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="status-bar">
                <span id="statusMessage">Ready to draw your route</span>
                <span id="coordinates" class="coordinates-display"></span>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingMessage">Processing route...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/elevation.js"></script>
    <script src="js/route-snapping.js"></script>
    <script src="js/route-templates.js"></script>
    <script src="js/route-optimization.js"></script>
    <script src="js/gpx-export.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 